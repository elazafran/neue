!function(){var n,e,o;!function(t){function i(n,e){return k.call(n,e)}function a(n,e){var o,t,i,a,r,s,l,c,u,d,f,p=e&&e.split("/"),m=w.map,h=m&&m["*"]||{};if(n&&"."===n.charAt(0))if(e){for(p=p.slice(0,p.length-1),n=n.split("/"),r=n.length-1,w.nodeIdCompat&&j.test(n[r])&&(n[r]=n[r].replace(j,"")),n=p.concat(n),u=0;u<n.length;u+=1)if(f=n[u],"."===f)n.splice(u,1),u-=1;else if(".."===f){if(1===u&&(".."===n[2]||".."===n[0]))break;u>0&&(n.splice(u-1,2),u-=2)}n=n.join("/")}else 0===n.indexOf("./")&&(n=n.substring(2));if((p||h)&&m){for(o=n.split("/"),u=o.length;u>0;u-=1){if(t=o.slice(0,u).join("/"),p)for(d=p.length;d>0;d-=1)if(i=m[p.slice(0,d).join("/")],i&&(i=i[t])){a=i,s=u;break}if(a)break;!l&&h&&h[t]&&(l=h[t],c=u)}!a&&l&&(a=l,s=c),a&&(o.splice(0,s,a),n=o.join("/"))}return n}function r(n,e){return function(){return p.apply(t,y.call(arguments,0).concat([n,e]))}}function s(n){return function(e){return a(e,n)}}function l(n){return function(e){v[n]=e}}function c(n){if(i(g,n)){var e=g[n];delete g[n],b[n]=!0,f.apply(t,e)}if(!i(v,n)&&!i(b,n))throw new Error("No "+n);return v[n]}function u(n){var e,o=n?n.indexOf("!"):-1;return o>-1&&(e=n.substring(0,o),n=n.substring(o+1,n.length)),[e,n]}function d(n){return function(){return w&&w.config&&w.config[n]||{}}}var f,p,m,h,v={},g={},w={},b={},k=Object.prototype.hasOwnProperty,y=[].slice,j=/\.js$/;m=function(n,e){var o,t=u(n),i=t[0];return n=t[1],i&&(i=a(i,e),o=c(i)),i?n=o&&o.normalize?o.normalize(n,s(e)):a(n,e):(n=a(n,e),t=u(n),i=t[0],n=t[1],i&&(o=c(i))),{f:i?i+"!"+n:n,n:n,pr:i,p:o}},h={require:function(n){return r(n)},exports:function(n){var e=v[n];return"undefined"!=typeof e?e:v[n]={}},module:function(n){return{id:n,uri:"",exports:v[n],config:d(n)}}},f=function(n,e,o,a){var s,u,d,f,p,w,k=[],y=typeof o;if(a=a||n,"undefined"===y||"function"===y){for(e=!e.length&&o.length?["require","exports","module"]:e,p=0;p<e.length;p+=1)if(f=m(e[p],a),u=f.f,"require"===u)k[p]=h.require(n);else if("exports"===u)k[p]=h.exports(n),w=!0;else if("module"===u)s=k[p]=h.module(n);else if(i(v,u)||i(g,u)||i(b,u))k[p]=c(u);else{if(!f.p)throw new Error(n+" missing "+u);f.p.load(f.n,r(a,!0),l(u),{}),k[p]=v[u]}d=o?o.apply(v[n],k):void 0,n&&(s&&s.exports!==t&&s.exports!==v[n]?v[n]=s.exports:d===t&&w||(v[n]=d))}else n&&(v[n]=o)},n=e=p=function(n,e,o,i,a){if("string"==typeof n)return h[n]?h[n](e):c(m(n,e).f);if(!n.splice){if(w=n,w.deps&&p(w.deps,w.callback),!e)return;e.splice?(n=e,e=o,o=null):n=t}return e=e||function(){},"function"==typeof o&&(o=i,i=a),i?f(t,n,e,o):setTimeout(function(){f(t,n,e,o)},4),p},p.config=function(n){return p(n)},n._defined=v,o=function(n,e,o){e.splice||(o=e,e=[]),i(v,n)||i(g,n)||(g[n]=[n,e,o])},o.amd={jQuery:!0}}(),o("bower_components/almond/almond",function(){}),o("js/events",[],function(){var n={},e=-1,o=function(e,o){return n[e]?(setTimeout(function(){for(var t=n[e],i=t?t.length:0;i--;)t[i].func(e,o)},0),!0):!1},t=function(o,t){n[o]||(n[o]=[]);var i=(++e).toString();return n[o].push({token:i,func:t}),i},i=function(e){for(var o in n)if(n[o])for(var t=0,i=n[o].length;i>t;t++)if(n[o][t].token===e)return n[o].splice(t,1),e;return!1};return{publish:o,subscribe:t,unsubscribe:i}}),o("js/modal",["require","./events"],function(n){var e=window.jQuery,o=window.Modernizr,t=n("./events"),i=!1,a=null,r=e(document),s=e(".chrome"),l=null,c=e("<a href='#' class='js-close-modal js-modal-generated modal-close-button -alt'>skip</a>"),u=e("<a href='#' class='js-close-modal js-modal-generated modal-close-button'>&#215;</a>"),d=null,f=!1,p=function(){return null!==d},m=function(n,o,t){switch(o){case"skip":n.prepend(c),c.on("click",function(n){n.preventDefault(),e(t).submit()}),f=!1;break;case"false":case"0":f=!1;break;default:n.prepend(u),f=!0}},h=function(n,e){if(e=e||{},e.animated="boolean"==typeof e.animated?e.animated:!0,e.closeButton="undefined"!=typeof e.closeButton?e.closeButton:n.attr("data-modal-close"),e.skipForm="undefined"!=typeof e.skipForm?e.skipForm:n.attr("data-modal-skip-form"),0===n.length)return!1;if(!i)return a={$el:n,options:e},!1;var c="-"+r.scrollTop()+"px";m(n,e.closeButton,e.skipForm),p()?(d.hide(),n.show()):(s.css("top",c),s.addClass("has-modal"),l.css("display","block"),e.animated&&o.cssanimations&&l.addClass("animated-open"),n.css("display","block")),setTimeout(function(){r.scrollTop(0)},50),t.publish("Modal:Open",n),d=n},v=function(n){l.css("display","none"),l.removeClass("animated-close"),d.css("display","none"),d.find(".js-modal-generated").remove(),s.removeClass("has-modal"),s.removeClass("animated-close"),s.css("top",""),r.scrollTop(n),d=null},g=function(n){n=n||{},n.animated="undefined"!=typeof n.animated?n.animated:!0;var e=-1*parseInt(s.css("top"));window.location.hash==="#"+d.attr("id")&&(window.location.hash="/"),n.animated&&o.cssanimations?(s.addClass("animated-close"),l.addClass("animated-close"),l.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){v(e)})):v(e),t.publish("Modal:Close",d)},w=function(n){n.preventDefault();var o=e(this).data("modal-href");h(e(o))},b=function(n){n.target===this&&(e(this).hasClass("js-close-modal")||f)&&(n.preventDefault(),g())};return r.ready(function(){var n=e("body");l=e("<div class='modal-container'></div>"),n.append(l),e("[data-modal]").each(function(){e(this).appendTo(l),e(this).attr("hidden",!0)});var o=window.location.hash;o&&"#/"!==o&&e(o)&&"undefined"!=typeof e(o).data("modal")&&h(e(o)),i=!0,null!==a&&h(a.$el,a.options),n.on("click","[data-modal-href]",w),n.on("click",".modal-container",b),n.on("click",".js-close-modal",b)}),window.DS=window.DS||{},window.DS.Modal={isOpen:p,open:h,close:g,Events:t},window.DS.Modal}),e(["js/modal"])}();
//# sourceMappingURL=modal.js
//# sourceMappingURL=modal.js.map